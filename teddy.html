<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Teddy Day üß∏</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=Lato:wght@300;400&display=swap');

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(160deg, #fff1f5 0%, #ffe4ec 100%);
      font-family: 'Lato', sans-serif;
      color: #4a1c2a;
      overflow: hidden;
      transition: background 1s ease;
    }

    body.warm {
      background: linear-gradient(160deg, #ffe8cc 0%, #ffcda0 100%);
    }

    .card {
      background: rgba(255,255,255,0.93);
      padding: 2.4rem 2rem;
      border-radius: 20px;
      max-width: 420px;
      width: 90%;
      text-align: center;
      box-shadow: 0 16px 48px rgba(74,28,42,0.12);
      transition: box-shadow 1s ease;
    }
    .card.warm {
      box-shadow: 0 16px 60px rgba(200,80,30,0.2);
    }

    .title {
      font-family: 'Playfair Display', serif;
      font-size: 1.7rem;
      margin-bottom: 0.3rem;
    }
    .subtitle {
      font-size: 0.9rem;
      opacity: 0.65;
      margin-bottom: 2rem;
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }

    .teddy-wrap {
      position: relative;
      width: 200px;
      height: 200px;
      margin: 0 auto 1rem;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      cursor: pointer;
      touch-action: none;
    }

    .teddy-wrap svg {
      width: 100%;
      height: 100%;
      transition: transform 0.4s ease, filter 0.8s ease;
    }

    .teddy-wrap.holding svg {
      transform: scale(1.1);
      filter: drop-shadow(0 8px 24px rgba(220,100,30,0.4));
    }

    .hold-hint {
      font-size: 0.85rem;
      opacity: 0.6;
      margin-bottom: 1.2rem;
      transition: opacity 0.5s;
    }

    .message {
      font-family: 'Playfair Display', serif;
      font-size: 1.1rem;
      line-height: 1.7;
      min-height: 2.5rem;
      opacity: 0;
      transform: translateY(6px);
      transition: opacity 0.8s ease, transform 0.8s ease;
      color: #6d1e35;
      font-style: italic;
    }
    .message.show {
      opacity: 1;
      transform: translateY(0);
    }

    /* Warmth ring pulse */
    .warmth-ring {
      position: absolute;
      inset: -10px;
      border-radius: 50%;
      border: 2px solid rgba(220,120,50,0);
      transition: border-color 0.8s ease, transform 0.8s ease;
      pointer-events: none;
    }
    .holding .warmth-ring {
      border-color: rgba(220,120,50,0.35);
      transform: scale(1.08);
    }

    .back-link {
      display: inline-block;
      margin-top: 1.8rem;
      font-size: 0.8rem;
      opacity: 0.5;
      color: inherit;
      text-decoration: none;
    }
    .back-link:hover { opacity: 0.8; }

    /* Floating warmth particles */
    .particle {
      position: fixed;
      pointer-events: none;
      font-size: 1.1rem;
      animation: floatWarm 2s ease-out forwards;
      z-index: 100;
    }
    @keyframes floatWarm {
      0% { opacity: 0.8; transform: translateY(0) scale(1); }
      100% { opacity: 0; transform: translateY(-100px) scale(0.5); }
    }
  </style>
</head>
<body>

<div class="card" id="card">
  <div class="title">Teddy Day üß∏</div>
  <div class="subtitle">Feb 10 ¬∑ Hold me</div>

  <div class="teddy-wrap" id="teddyWrap">
    <div class="warmth-ring"></div>
    <svg viewBox="0 0 200 200" id="teddySvg">
      <!-- Body -->
      <ellipse cx="100" cy="130" rx="52" ry="55" fill="#c8855a"/>
      <!-- Tummy -->
      <ellipse cx="100" cy="138" rx="30" ry="32" fill="#e8b080"/>
      <!-- Head -->
      <circle cx="100" cy="75" r="42" fill="#c8855a"/>
      <!-- Ears -->
      <circle cx="65" cy="40" r="18" fill="#c8855a"/>
      <circle cx="65" cy="40" r="10" fill="#e8b080"/>
      <circle cx="135" cy="40" r="18" fill="#c8855a"/>
      <circle cx="135" cy="40" r="10" fill="#e8b080"/>
      <!-- Eyes -->
      <circle cx="87" cy="70" r="7" fill="#2d1200"/>
      <circle cx="113" cy="70" r="7" fill="#2d1200"/>
      <circle cx="89" cy="68" r="2.5" fill="white"/>
      <circle cx="115" cy="68" r="2.5" fill="white"/>
      <!-- Nose -->
      <ellipse cx="100" cy="83" rx="7" ry="5" fill="#2d1200"/>
      <!-- Mouth -->
      <path d="M 93 89 Q 100 96 107 89" stroke="#2d1200" stroke-width="2" fill="none" stroke-linecap="round"/>
      <!-- Arms (normal) -->
      <g id="armsNormal">
        <ellipse cx="55" cy="125" rx="18" ry="28" fill="#c8855a" transform="rotate(-15 55 125)"/>
        <ellipse cx="145" cy="125" rx="18" ry="28" fill="#c8855a" transform="rotate(15 145 125)"/>
      </g>
      <!-- Arms hugging (hidden) -->
      <g id="armsHug" opacity="0">
        <ellipse cx="62" cy="132" rx="18" ry="28" fill="#c8855a" transform="rotate(55 62 132)"/>
        <ellipse cx="138" cy="132" rx="18" ry="28" fill="#c8855a" transform="rotate(-55 138 132)"/>
      </g>
      <!-- Legs -->
      <ellipse cx="80" cy="178" rx="18" ry="14" fill="#c8855a"/>
      <ellipse cx="120" cy="178" rx="18" ry="14" fill="#c8855a"/>
      <!-- Blush -->
      <ellipse cx="78" cy="84" rx="9" ry="6" fill="#e87a7a" opacity="0" id="blushL"/>
      <ellipse cx="122" cy="84" rx="9" ry="6" fill="#e87a7a" opacity="0" id="blushR"/>
      <!-- Heart on tummy (appears when holding) -->
      <text x="91" y="145" font-size="16" opacity="0" id="tummyHeart">ü§ç</text>
    </svg>
  </div>

  <div class="hold-hint" id="holdHint">press and hold</div>
  <div class="message" id="message"></div>

  <a href="index.html" class="back-link">‚Üê back</a>
</div>

<audio id="bgMusic" src="teddy.mp3" loop></audio>

<script>
  const wrap = document.getElementById('teddyWrap');
  const card = document.getElementById('card');
  const bgMusic = document.getElementById('bgMusic');
  let musicStarted = false;
  const armsNormal = document.getElementById('armsNormal');
  const armsHug = document.getElementById('armsHug');
  const blushL = document.getElementById('blushL');
  const blushR = document.getElementById('blushR');
  const tummyHeart = document.getElementById('tummyHeart');
  const message = document.getElementById('message');
  const holdHint = document.getElementById('holdHint');
  const body = document.body;

  let holding = false;
  let warmLevel = 0;
  let animFrame;
  let particleInterval;
  let messageShown = false;

  const messages = [
    "I wish I could hug you right now.",
    "This is me, holding you.",
    "I wish this was real."
  ];
  let msgIdx = 0;

  function setWarm(level) {
    // level 0‚Äì1
    warmLevel = Math.max(0, Math.min(1, level));
    blushL.style.opacity = warmLevel * 0.7;
    blushR.style.opacity = warmLevel * 0.7;
    armsNormal.style.opacity = 1 - warmLevel;
    armsHug.style.opacity = warmLevel;
    tummyHeart.style.opacity = warmLevel * 0.9;

    if (warmLevel > 0.5 && !messageShown) {
      messageShown = true;
      message.textContent = messages[msgIdx % messages.length];
      message.classList.add('show');
    }
    if (warmLevel < 0.3) {
      message.classList.remove('show');
      messageShown = false;
    }
  }

  function spawnParticle() {
    const rect = wrap.getBoundingClientRect();
    const el = document.createElement('div');
    el.className = 'particle';
    el.textContent = ['ü§ç','‚ú®','üß°','üíõ'][Math.floor(Math.random()*4)];
    el.style.left = (rect.left + Math.random()*rect.width) + 'px';
    el.style.top = (rect.top + Math.random()*rect.height*0.5) + 'px';
    document.body.appendChild(el);
    setTimeout(() => el.remove(), 2100);
  }

  function startHold() {
    holding = true;
    wrap.classList.add('holding');
    card.classList.add('warm');
    body.classList.add('warm');
    holdHint.style.opacity = '0';
    if (!musicStarted) {
      musicStarted = true;
      bgMusic.volume = 0.45;
      bgMusic.play().catch(() => {});
    }

    particleInterval = setInterval(spawnParticle, 600);

    function grow() {
      if (!holding) return;
      setWarm(warmLevel + 0.015);
      animFrame = requestAnimationFrame(grow);
    }
    grow();
  }

  function stopHold() {
    holding = false;
    wrap.classList.remove('holding');
    card.classList.remove('warm');
    body.classList.remove('warm');
    clearInterval(particleInterval);
    cancelAnimationFrame(animFrame);
    holdHint.style.opacity = '0.6';
    holdHint.textContent = 'hold again';

    function shrink() {
      if (holding || warmLevel <= 0) return;
      setWarm(warmLevel - 0.025);
      if (warmLevel > 0) requestAnimationFrame(shrink);
    }
    shrink();

    msgIdx++;
  }

  wrap.addEventListener('pointerdown', (e) => { e.preventDefault(); startHold(); });
  wrap.addEventListener('pointerup', stopHold);
  wrap.addEventListener('pointerleave', stopHold);
  wrap.addEventListener('pointercancel', stopHold);
</script>
</body>
</html>
